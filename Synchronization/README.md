Задание к занятию № 4 и 5 (Синхронизация)
Дедлайн 5 апреля.
Теоретический материал:
Джефри Рихтер. Windows для профессионалов. Глава 4 “Процессы”, глава 9 “Синхронизация потоков”, глава 17 “Проецируемы файлы в память”.
1. Создайте отдельный проект Worker.exe, решающий задачу очистки текста от несловарных слов. Процесс ждет двух событий: появления текста для обработки и необходимость завершения процесса. Через аргументы командной строки процесс получает файл со списком запрещенных слов.
Указание. Название событий (Event’ов) формируйте на основе некоторого текста + id процесса. Например, “Global\\CloseExecutor2517”.
3. При сигнализации события о появлении нового текста процесс должен считывать из файла в памяти текст, создать новый текст без несловарных слов, записать новый текст в тот же файл в памяти.
4. Создайте проект FilterText.exe <target_words.txt> <src_file_name.txt> <target_name.txt>, который при запуске будет
а) бить текст на 4 части по границе слов,
б) запустит 4 процесса, передав им через аргументы командной строки файл с запрещенными словами.
в) заполнит файлы в памяти соответствующими частями текста,
г) выставит 4 события о появлении новых текстов для обработки вспомогательными процессами
д) дождется окончания обработки каждого куска текста,
е) прочитает готовые куски текста из каждого файла в памяти,
ж) соберет готовый текст и вывести его в файл <target_name.txt>.
5. Каждый вспомогательный процесс ожидает два события: появление нового задания и завершения работы. При появлении нового задания он должен:
а) Считать текст из соответствующего файла в памяти,
б) Очистить его, а результат поместить обратно в тот же файл в памяти,
в) Выставить событие (event) об окончании обработки текста.
Всего:
4 автоматических event’а о появлении нового задания.
1 ручной event о необходимости завершить работу.
4 автоматических event’а об окончании обработки.
4 файла в памяти.
6* (необязательно, но желательно). Ожидать на вспомогательном процессе объект главного процесса. Если главный процесс завершен, то действовать так же, как и в обработке event’а о необходимости завершить работу.
